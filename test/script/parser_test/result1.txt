('script', 'bank')(variables(('var', 'x', 'real', '100'), ('var', 'y', 'integer', '100'), ('var', 'z', 'text', 'hello')), states(('state', 'welcome')(speak(terms(('str', 'Hello, welcome to the test script'))), speak(terms(('str', "Input [balance] to check your account's balance"))), speak(terms(('str', 'Input [topup] to top up your account'))), speak(terms(('str', 'Input [withdraw] to withdraw money from your account'))), speak(terms(('str', 'Input [exit] to exit the script'))), switch(('case', 'hello')(speak(terms(('str', 'hello'))), ('goto', 'welcome')), ('case', 'balance')(speak(terms(('str', 'Your balance is '), ('id', 'x'))), ('goto', 'welcome')), ('case', 'topup')(('goto', 'topup')), ('case', 'withdraw')(('goto', 'withdraw')), ('case', 'exit')(('goto', 'goodbye')), default(speak(terms(('str', 'Unknown command, please try again'))), ('goto', 'welcome'))), ('timeout', '30')(speak(terms(('str', 'You have been idle for 30 seconds. Restarting service ...'))), ('goto', 'welcome'))), ('state', 'withdraw')(speak(terms(('str', 'How much would you like to withdraw?'))), switch(('case', ('compare', '_return', '<=', ('id', 'x')))(speak(terms(('str', 'You have withdrawn '), ('<return>', '_return'), ('str', ' dollars'))), ('update', 'x')(('calc', 'MINUS')(('id', 'x'), ('<return>', '_return'))), ('goto', 'welcome')), ('case', ('compare', '_return', '>', ('id', 'x')))(speak(terms(('str', 'You do not have enough money in your account!'))), ('goto', 'welcome')), default_empty), ('timeout', '30')(speak(terms(('str', 'You have been idle for 30 seconds. Restarting service ...'))), ('goto', 'welcome'))), ('state', 'topup')(speak(terms(('str', 'How much would you like to top up?'))), switch(('case', ('compare', '_return', '>=', ('var', '0')))(speak(terms(('str', 'You have topped up '), ('<return>', '_return'), ('str', ' dollars'))), ('update', 'x')(('calc', 'PLUS')(('id', 'x'), ('<return>', '_return'))), ('goto', 'welcome')), ('case', ('compare', '_return', '<', ('var', '0')))(speak(terms(('str', 'You cannot top up a negative amount!'))), ('goto', 'welcome')), default_empty), ('timeout', '30')(speak(terms(('str', 'You have been idle for 30 seconds. Restarting service ...'))), ('goto', 'welcome'))), ('state', 'goodbye')(speak(terms(('str', 'Are you sure you want to exit?[yes/no]'))), switch(('case', 'yes')(exit), ('case', 'no')(('goto', 'welcome')), default(speak(terms(('str', 'not quite understood'))))), ('timeout', '30')(('goto', 'welcome')))))
